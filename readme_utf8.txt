お出かけ前の戸締りチェッカー
＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝

無線タグアプリ （Samp_Monitor）のセンサーモード0xFE(ボタン起動モード)をベースに、以下の動作を予定しています。

■センサー子機の動作
・スリープ状態からタイマーで定期的(30秒を予定)に起床し、窓の開閉状態を送信します。
・窓が開いてリードスイッチが開状態になったら、IO割り込みで起床して状態を送信します。
・子機に設定した論理IDを表示用の窓IDとして使用します。
・TWE-EH Solar（エナジーハーベスト・ソーラー）と電気二重層キャパシタを電源とし、電池交換を不要にします。
・光量不足で太陽電池の発電が十分でない場合は、CR2032リチウム電池を電源とします(電池寿命は約1年)。

■親機の動作
・スリープせずに、ACアダプターからの電源で常時動作します。
・子機から間欠送信された情報を受信し、開閉状態、電源状態、通信の有無を保持します。
・10秒毎、またはリモート子機からのMessagePool要求を受信した時に、センサー子機の状態をbroadcastします。

■リモート子機の動作
・通常はスリープし、押しボタンスイッチが押されたら起床します。
・起床直後にMessagePoolの要求を送信し、センサー子機の状態を親機から受信します。
・センサー子機の状態を受信したら、開閉状態をLED,LCDおよび合成音声で報告します。
・状態報告後、10秒程度でスリープし、ボタンが押されるのを待ちます。

改造前のソースコードは、以下のリンクの「無線タグ」に掲載されています。
http://tocos-wireless.com/jp/products/TWE-ZERO/index.html
